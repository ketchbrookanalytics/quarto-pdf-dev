// https://github.com/rocker-org/devcontainer-features
{
	"name": "My Awesome Report",
	"image": "browserless/chrome",

	// Features to add to the dev container. More info: https://containers.dev/features.
	"features": {

		// Install Quarto CLI
		// More info: https://github.com/rocker-org/devcontainer-features/tree/main/src/quarto-cli
		"ghcr.io/rocker-org/devcontainer-features/quarto-cli:1": {
			"installChromium": true // need this for rendering mermaidjs diagrams to PDF/Word/etc.
		},

		// Configure R on Ubuntu
		// More info: https://github.com/rocker-org/devcontainer-features/tree/main/src/r-apt.
		"ghcr.io/rocker-org/devcontainer-features/r-apt:latest": {
			// "vscodeRSupport": "full",
			"installRMarkdown": true
		}

		// Uncomment to install additional R package dependencies
		// "ghcr.io/rocker-org/devcontainer-features/r-packages:1": {
		// 	"packages": "dplyr, ggplot2",
		// 	"additionalRepositories": "CRAN = 'https://packagemanager.posit.co/cran/__linux__/jammy/latest'"
		// }

	},

	// Wait to install R packages until R is installed. More info: https://github.com/rocker-org/devcontainer-features/tree/main/src/apt-packages#installation-order
	"overrideFeatureInstallOrder": [
		"ghcr.io/rocker-org/devcontainer-features/r-apt"
	],

	// Installing R package dependencies without pak
	"postCreateCommand": ["Rscript", "-e", "install.packages(c('dplyr', 'ggplot2', 'rmarkdown'))"],

	// Configure tool-specific properties.
	"customizations": {
		// Settings for VS Code.
		"vscode": {
			"settings": {
				"editor.rulers": [80]
			},
			"extensions": [
				"quarto.quarto",
				"RDebugger.r-debugger",
				"REditorSupport.r",
				"tomoki1207.pdf"
			]
		}
	},

	// Connect as root user. More info: https://aka.ms/dev-containers-non-root.
	"remoteUser": "root"
}

